# Cronメッセージ

aoには、指定された間隔でメッセージを生成する機能があります。この間隔は、秒、分、時間、またはブロックで設定できます。これらのメッセージは、監視プロセスによって自動的に評価され、プロセスがこれらのメッセージを時間の経過とともに評価するよう通知されます。その結果、aoネットワーク全体や外部ネットワークのオラクルと通信できるリアルタイムプロセスが実現します。

## プロセスでのcronの設定

これらのcronメッセージを作成する最も簡単な方法は、aosコンソールで新しいプロセスを生成し、時間間隔を定義することです。

```sh
aos [myProcess] --cron 5-minutes
```

新しいプロセスを生成する際、コマンドラインでcron引数を指定し、cronがティックする間隔を続けて指定します。メッセージをリアルタイムでトリガーしたい場合は、監視イベントを開始する必要があります。aosでは、`.monitor`を呼び出すだけで、`mu`上でcronメッセージをトリガーするワーカープロセスが起動します。これにより、あなたのプロセスは`x-interval`ごとにcronメッセージを受信します。

```lua
.monitor
```

cronメッセージのトリガーを停止したい場合は、`.unmonitor`を呼び出すことでトリガープロセスを停止できますが、次回メッセージを送信するときに生成されたcronメッセージは引き続き作成され、処理されます。

## cronメッセージの処理

すべてのcronメッセージには、`Action`タグがあり、その値は`Cron`です。[ハンドラー](handlers.md)を定義して、cronメッセージを受信するたびに特定のタスクを自動的に実行できます。

```lua
Handlers.add(
  "CronTick", -- ハンドラー名
  Handlers.utils.hasMatchingTag("Action", "Cron"), -- cronメッセージを識別するためのハンドラーパターン
  function () -- cronメッセージで実行するハンドラータスク
    -- 何かを行う
  end
)
```

cronメッセージは、「自律エージェント」を作成するために使用できる強力なユーティリティです。

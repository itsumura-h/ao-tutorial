# アナウンスの解釈

コーディングの旅へようこそ。これまでのチュートリアルで習得したスキルを使って、ゲーム体験を向上させましょう。

ゲーム中にターミナルにアナウンスが表示されることに気付いたことがあるでしょう。これらのアナウンスは、プレイヤーに重要なイベントを伝えるためのゲームの方法です。しかし、これらのメッセージは時折難解に見えることがあり、詳細を確認するために頻繁に受信トレイをチェックする必要があるかもしれません。

この情報をターミナルから直接アクセスできると便利だと思いませんか？実は、それが可能です！

[ハンドラ](/references/handlers.md)を使用して、自動で情報を取得するエージェントを作成することができます。これにより、単純なボットからゲームイベントを直接解釈して行動できるエンティティへと進化します。

## 開発環境の設定

まず、お好みのディレクトリに`bot.lua`という新しいファイルを作成します。

> このファイルは、コードの読み込みを簡単にするために、プレイヤープロセスが実行されるディレクトリに配置するのが理想的です。そうでない場合は、ファイルにアクセスするために相対パスを使用する必要があります。

## コードの記述

では、ロジックを見てみましょう。

aosの各ハンドラには、次の3つの重要な情報が必要です：

- `name`: ハンドラの一意の名前
- `pattern`: ハンドラが識別し、操作をトリガーするためのパターン
- `handle`: 希望するパターンが見つかったときに実行する操作

以下は、アナウンスの詳細をターミナルに表示するハンドラの記述方法です：

```lua
-- ハンドラを使ってゲームのアナウンスを直接ターミナルに表示します。
Handlers.add(
  "PrintAnnouncements",
  { Action = "Announcement" },
  function (msg)
    print(msg.Event .. ": " .. msg.Data)
  end
)
```

この場合、ハンドラの名前は`"PrintAnnouncements"`です。`{ Action = "Announcement" }`という特別な組み込みユーティリティ（`hasMatchingTags`）を使用して、受信メッセージがアナウンスとしてタグ付けされているかどうかをチェックします。もしそうなら、ハンドラはアナウンスのタイトルと説明を表すEventとDataを表示します。

> 注意
> メッセージが「処理」されると、それは受信トレイから削除されます。

## ロードとテスト

では、これをゲームで実際に動かしてみましょう。

aosプレイヤーターミナルに移動し、ゲームセッションに参加します。

次のコマンドを使用して、`bot.lua`ファイルをロードしてハンドラをアクティブにします：

```lua
.load bot.lua
```

これで、ゲームアナウンスが直接ターミナルに表示され、受信トレイを調べることなくリアルタイムのインサイトが得られます。

おめでとうございます！`aos`でボットを構築するための最初のステップを踏み出しました。しかし、さらに多くの機能を追加するために作業を続けましょう 🌐

# ao メッセージングの仕組み

aoについて詳しく説明する前に、Unixに関する少しの情報を共有したいと思います。Unixは強力なオペレーティングシステムですが、その設計は2つの主要な「タイプ」に焦点を当てています。ファイルとプログラムです。ファイルはデータであり、プログラムはロジックです。この2つを組み合わせると情報が得られます。

`Input.file | TransformProgram | Output.file`

コマンドラインで何をしているのか知らずに、このようなことを行ったことがあるかもしれません。ファイルをプログラムに接続し、他のプログラムに渡すファイルを返すことができると、シンプルなアプリケーションで構成された複雑なシステムが作成されます。これは非常に強力なアイデアです。

さて、「ao」というハイパーパラレルコンピュータについて話しましょう。そして、ファイルのアイデアを`ao`のメッセージの概念に、プログラムのアイデアを`ao`のプロセスの概念に置き換えましょう。`ao`コンピュータはメッセージを受け取り、それをプロセスに送信します。そのプロセスはメッセージを出力し、他のプロセスに送信することができます。その結果、シンプルなモジュール式のロジックコンテナで構成された複雑なシステムが構築されます。

`MessageA | Process | MessageB`

![ao-messages](https://g8way.io/eAoqMqhwQ5vnpH_NJ6H2PiGgrcGDprtDIUH9Re2xcic)

以下は、フローチャートに示されたプロセスの説明です：

1. メッセージはao Connectから開始されます。このメッセージはPOSTリクエストを使用して`mu`サービスに送信されます。リクエストのボディには、'ao'というプロトコルに従い、'Message'というタイプのデータが含まれています。

2. `mu`サービスはPOSTリクエストを処理し、メッセージを`su`サービスに転送します。これも同じデータプロトコルとメッセージタイプを使用してPOSTリクエストで行われます。

3. `su`サービスはArweaveにアサインメントとメッセージを保存します。

4. `cu`サービスに対してGETリクエストが行われ、メッセージIDに基づいて結果を取得します。`cu`はプロセス上でメッセージを評価し、個々のメッセージ識別子に基づいて結果を返すことができるサービスです。

5. `su`サービスに対してGETリクエストが行われ、アサインメントとメッセージを取得します。このリクエストは、プロセスIDからのメッセージを、開始（最後の評価ポイントから）から（現在のメッセージIDまで）の範囲内で探しています。

6. 最終ステップは、アウトボックスメッセージをプッシュすることです。これは、結果オブジェクト内のメッセージとスパーンを確認することを含みます。このチェックの結果に基づいて、各関連メッセージまたはスパーンに対してステップ2、3、および4が繰り返される場合があります。
